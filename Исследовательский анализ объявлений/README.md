## Исследование объявлений о продаже квартир
В вашем распоряжении данные сервиса Яндекс.Недвижимость — архив объявлений о продаже квартир в Санкт-Петербурге и соседних населённых пунктов за несколько лет. 
Нужно научиться определять рыночную стоимость объектов недвижимости. Ваша задача — установить параметры. Это позволит построить автоматизированную систему: она отследит аномалии и мошенническую деятельность.  

По каждой квартире на продажу доступны два вида данных. Первые вписаны пользователем, вторые — получены автоматически на основе картографических данных. Например, расстояние до центра, аэропорта, ближайшего парка и водоёма.

## Общий вывод
**Предобработка данных включала в себя**:
1. Обработка пропусков:
* Пропущенные значения жилой площади и площади кухонь были заполнены медианными значениями для квартир с аналогичным количеством комнат.
* Пропущенные значения высоты полтолков замены на медианные
* Пропущеные значения количества балконов были заменены на 0, поскольку пользователи не указывают число балконов, вероятно, потому что их нет.
* В столбце с отметкой апартаментов большинство значений - пропуски, что соответствует тому, что, судя по предыдущим полученым данным, квартира не является апартаментами, а оставшиеся знаения в столбце соответствуют типу bool. Замена пропусков на False одновременно решила проблему пропусков и типов данных.
* Недостающие данные о количестве парков и водоёмов заменены на значение 0, поскольку пользователи, вероятнее всего, не указывали парк/водоём рядом, потому что их нет либо о них нет данных.
* Остальные пропуски оставили, поскольку восстановить их значения не представляется возможным. Их наличие учтено при дальнейших расчетах.
2. Типы данных:
* Тип данных столбца с датой пубдикации объявления был изменен на datetime для удобства последующего анализа.
* Тип данных столбцов с числом комнат, этажей, балконов, парков, водоёмов изменен на целочисленный.
3. Аномальные значения в данных:
* Локальный пик на 0 фотографий. Это выглядит как ошибка, поскольку по правилам Яндекс.Недвижимости можно размещать от 3 фотографий для жилых помещений, иначе объявление не пройдет модерацию. Ссылка на Справку Локальный пик на 20 фотографиях, что может быть обусловлено максимальным или рекомендуемым количеством фотографий. На момент исследования (июнь 2023 года) максимум фотографий составляет 30 (указано при добавлении нового объявления). Можно предположить, что в 2019 году, когда был составлен исследуемый датасет, максимум фотографий или рекомендуемое их количество составляло 20. Значения ниже 3 и выше 20 похожи на ошибочные. Их заменили на медианные значения по столбцу в пределах от 3 до 20 фото.
* Обнаружилась 1 позиция со стоимостью менее 150 000, находящаяся в 9 км от центра Санкт-Петербурга, с прощадью более 100 кв.м, на 25 этаже 25-этажного дома. Похоже, что стоимость этой квартиры записана пользователем не в рублях, а в тысячах рублей, поэтому цена была умножена на 1000.
* Также было принято решение не брать во внимание при дальнейших расчетах квартиры стоимостью более 50 млн, поскольку данные по ним также сильно выбиваются из остальных, например, площади квартир, высота потолков и т.д, и они могут негативно отразиться на общей статистике. Таких объектов было 131 и все они находятся в Санкт-Пеьербурге.
* Значение комнат 0 по общей и жилой площади, соответствовало однокомнатным квартирам и квартирам-студиям, поэтому число комнат было изменено в этом случае на 1.
* Высоты потолков 100 и 1 м заменены на медианные, потолки выше 24 м можно считать ошибочно введенными без десятичной запятой, поэтому из значения разделены на 10. Также полтолки выше 4 метров в квартирах тоже являются выносом и заменены на медианные.
* Количество былконов больше 3 не соответствует метражу квартир. В системе Яндекс.Недвижимости обозначениям 4 и 5 соответствуют лоджии, поэтому решено было заменить в этих случаях количество балконов на 1. Это не соответствует медианному значению 0, поскольку пользователями была указано число, отличное от нуля.
* Значения этажей 34-37 приведены к 35, что соответствует ЖК "Князь Александр Невский" (единственному ЖК в городе выше 33 этажей)
* Исправлено значение 60 на 6 в дома в Кронштадте, поскольку там нет и не было высотного строительства.
* Расстояние от единственного в данный момент действующего пассажирского аэропорта Пулково до ближайших жилых домов составлявляет около 1 км (Авиагородок) , поскольку нет нормативов по дальности строительства от аэропорта. Была обнаружена одна строка со значением, равным 0, и т.к. данная квартира находится в Санкт-Петербурге, значение дальности до аэропорта было заменено на медианное по Сант-Петербургу.
* Были удалены значения рассстояний до парков и водоёмов более 3000м, поскольку в данных рассматривалось количество в радиусе 3000 м.
* Было предположено, что некоторые публикации могли повторяться, поэтому данные в таблице сравнили по основным столбцам, исключив дату и срок публикации. Было выявлено 51 повтор, который был удален. Вероятно, в датасете есть еще повторения, которые вызваны ошибочно введенными данными, с последующим удалением объявления и публикацией нового, но для этого требуется более глубокий анализ.
4. Для унификации названий населенных пунктов было проведено следующее:
* все названия были переведены в нижний регистр
* буква "ё" заменена на "е"
* исключены строки с отстутствующим значением, т.к. не представляется возможным его установить
* из названий исключены типы населенных пунктов
* согласованы повторяющиеся названия
В результате предобработки из датасета было удалено 2,6% строк.  

**Добавлены следующие столбцы данных:**

* цена одного квадратного метра;
* день недели публикации объявления (0 — понедельник, 1 — вторник и так далее);
* месяц публикации объявления;
* год публикации объявления;
* тип этажа квартиры (значения — «первый», «последний», «другой»);
* расстояние до центра города в километрах (переведите из м в км и округлите до * целых значений).
 
**Был проведен исследовательский анализ данных**  
* Построены гистограммы и описаны значения по основным параметрам объявлений продажи квартир  
* Изучено, как быстро продавались квартиры.  
Среднее составляет: 168.6 дней  
Медиана составляет: 95 дней  
* Продажа чаще всего занимает: 45 дней (мода по выборке)    
Быстрыми можно считать продажи, отвечающие первому квантилю в распределении: 45 дней.  
Слишком медленными можно считать продажи свыше 500 дней (выносы в диаграмме размаха).

**На основании вычисленных коэффициентов корреляций и визуализированных данных на стоимость квартиры влияют следующие факторы:** 
* Цена квартиры напрямую зависит от общей площади, а также жилой площади, кухни и количества комнат, т.к. они эти величины также взаимосвязаны между собой.
Однако, чем больше ниже эти значения, тем больше выражена зависимость.
* Зависимость с размером кухни меньше, поскольку диапазон размеров кухонь тоже меньше, и не настолько широк, как общей площади. * Зависимости цены от дня недели, месяца не обнаружено.
* Прямой зависимости от года подачи объявления тоже нет, но на визуализированных данных наблюдается сначала рост стоимости недвижимости, потом некоторый спад.
* Прослеживается небольшая зависимость цены квартиры от этажа, на котором она расположена. Квартиры на первых этажах дешевле остальных, квартиры, находящиеся не на крайних этажах в среднем дороже.
* Определена нааибольшая и наименьшая стоимость 1 кв.м. среди 10 населенных пунктов с максимальным числом объявлений.  
Санкт-Петебург - самая высокая медианная стоимость 1 кв.м, составляет 104 тыс.руб.  
Пушкин - самая высокая медианная стоимость 1 кв.м., если исключить Санкт-Петербург, составляет 100 тыс.руб  
Выборг - самая низкая стоимость 1 кв.м. и составляет 58 тыс. руб.  
* Изучая значения медианной стоимости жилья на разных расстояних, можно сказать, то есть небольшая обратная зависимость цены за квадратный метр от расстояния до центра, но на определенных расстояних есть районы с более дорогостоящей застройкой
Стоит обратить внимание, что многие пригороды официально входят в состав Санкт-Петербурга, в частности Сестрорецк и небольшие населенные пункты курортного района с дорогостоящим жильём, а также Пушкин, Павловск и прилежащие территории с элитной недвижимостью. В объявлениях они могут быть указаны как Санкт-Петербург.
